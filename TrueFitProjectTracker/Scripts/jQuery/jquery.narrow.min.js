(function(a) { a.fn.narrow = function(b) { a(this).keyup(function() { var g = a(b); var l = g.find("li"); var p = a(this).val(); var o = new Array(); var e = new Array(); for (var h = 0; h < l.length; h++) { o[h] = a(b).children("li").eq(h); e[h] = l[h].textContent.toString(); a(b).children("li").eq(h).show() } var c = new Array(); for (var h = 0; h < o.length; h++) { c[h] = l[h].textContent.toString().toLowerCase().indexOf(p.toString().toLowerCase()) } if (p.toString() == "") { e = e.sort(); var m = new Array(); for (var f = 0; f < e.length; f++) { for (var d = 0; d < e.length; d++) { if (e[f].toString().toLowerCase() == l[d].textContent.toString().toLowerCase()) { m[f] = o[d]; break } } } for (var h = m.length - 1; h >= 0; h--) { a(b).prepend(m[h]) } return } for (var h = 0; h < l.length; h++) { a(b).children("li").eq(h).remove() } var h = -1; var n = 0; for (var h = 0; h < c.length; h++) { if (c[h] >= n) { n = c[h] } } for (var h = 0; h <= n; h++) { for (var f = 0; f < o.length; f++) { if (c[f] == h) { if (c[f] == -1) { continue } else { a(b).append(o[f]) } } } } for (var f = 0; f < o.length; f++) { if (c[f] == -1) { a(b).append(o[f]) } } }) } })(jQuery);